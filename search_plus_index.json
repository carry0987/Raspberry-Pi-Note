{"./":{"url":"./","title":"Introduction","keywords":"","body":"Raspberry Pi Note This is carry0987's Raspberry Pi Note, just storge some note or tips for Raspberry Pi Device : Raspberry Pi 3 Model B+ OS : Pi-OS-Bullseye (Updated 2022-09-22) Recommend Tool : BerryBoot (Updated 2021-07-01) Author : carry0987 Project Links Github-Page Raspberry-Pi-Note Gitbook Raspberry-Pi-Note Contact Website Link Github @carry0987 Copyright © carry0987 all right reserved，powered by GitbookLast Modified : 2024-04-08 11:07:13 "},"article/01.Regular-Command.html":{"url":"article/01.Regular-Command.html","title":"Regular Command","keywords":"","body":"Linux Command Note Count folder's size du -sch /path/to/folder/*type Set Time & Date NTP sudo timedatectl set-ntp yes Scan WiFi sudo iwlist wlan0 scan Set default shell sudo ln -fs /bin/bash /bin/sh APT Search Package sudo apt-cache search keyword APT Error Fix If it shows E: Encountered a section with no Package: header Just clean the error link sudo rm /var/lib/apt/lists/* -vf And then sudo apt-get update Start SSH sudo /etc/init.d/ssh start Change SSH Port sudo vim /etc/ssh/sshd_config then sudo service ssh restart Regenerate SSH Key ssh-keygen -R \"you server hostname or ip\" Check crontab status sudo /etc/init.d/cron status Set crontab Edit cron crontab -e Remove cron crontab -r List cron crontab -l Start cron sudo service cron start Stop cron sudo service cron stop Reload cron config sudo service cron reload Restart cron sudo service cron restart Check cron status sudo service cron status Set default path of terminal echo 'cd ~/Desktop/' >> ~/.bashrc If in MacOS, use echo 'cd ~/Desktop/' >> ~/.bash_profile Zip zip -h Show the help interface -m After the file is compressed, delete the original file -o Set the latest change time of all files in the archive to the time of compression -q Quiet mode, does not display the execution of instructions during compression -r Treats all subdirectories under the specified directory together with the file -P Set the compression password Unzip unzip -l Show the files whitch contained in the compressed file -t Check if the compressed file is correct -P Unzip files with password Terminal Ctrl + Alt + F2 = Terminal Alt + F7 = Exit Terminal Vim Paste content: Shift + Ins Or Shift + right-mouse-click Rclone Show process every 1 second when upload files: rclone copy -v --stats 1s [File] [Target] Remove rclone: sudo rm /usr/bin/rclone sudo rm /usr/local/share/man/man1/rclone.1 Rclone Config File rclone -h | grep \"Config file\" Google API Google Console Check Nginx config file syntax nginx -t -c /etc/nginx/nginx.conf Screen Kill specific screen screen -S [pid/name] -X quit Or kill [pid] Kill all screen killall screen Copyright © carry0987 all right reserved，powered by GitbookLast Modified : 2024-04-08 11:07:13 "},"article/02.RPi3-Disable-Bluetooth-Or-WiFi-By-Default.html":{"url":"article/02.RPi3-Disable-Bluetooth-Or-WiFi-By-Default.html","title":"RPi3 Disable Bluetooth Or WiFi By Default","keywords":"","body":"RPi3 Disable Bluetooth Or WiFi By Default Step Use sudo mount /dev/mmcblk0p1 /mnt to mount SD Card Use sudo vim /mnt/config.txt to edit config Disable WiFi Add the following script to disable WiFi dtoverlay=pi3-disable-wifi Disable Bluetooth Add the following script to disable Bluetooth dtoverlay=pi3-disable-bt And then use the following script to shutdown the services of bluetooth sudo systemctl disable hciuart.service Then sudo systemctl disable bluetooth.service Reboot sudo reboot Now you can use iwconfig to check if the WiFi is disabled Also can use hciconfig to check if the Bluetooth is disabled Note I don't know why if I use sudo systemctl disable bluealsa.service to disable bluealsa, the raspberry pi will show this : Failed to disable unit: No such file or directory Maybe Raspbian-Stretch has remove this service by default ? Copyright © carry0987 all right reserved，powered by GitbookLast Modified : 2024-04-08 11:07:13 "},"article/03.RPi3-Turn-Off-HDMI.html":{"url":"article/03.RPi3-Turn-Off-HDMI.html","title":"RPi3 Turn Off HDMI","keywords":"","body":"RPi3 Turn off HDMI vcgencmd display_power 0 tvservice -o Note : If you want to re-open HDMI, just use the following script: tvservice -p && fbset -depth 8 && fbset -depth 16 Copyright © carry0987 all right reserved，powered by GitbookLast Modified : 2024-04-08 11:07:13 "},"article/04.Set-TCP-BBR.html":{"url":"article/04.Set-TCP-BBR.html","title":"BBR Congestion Control","keywords":"","body":"Set BBR Congestion Control Check Kernel uname -r The kernel version should >= 4.9.4, if isn't, please follow the script below to update kernel: Update Kernel sudo rpi-update sudo reboot Install BBR sudo bash -c 'echo \"net.core.default_qdisc=fq\" >> /etc/sysctl.conf' sudo bash -c 'echo \"net.ipv4.tcp_congestion_control=bbr\" >> /etc/sysctl.conf' sudo sysctl -p sudo reboot Check BBR sysctl net.ipv4.tcp_available_congestion_control It might display like this: net.ipv4.tcp_available_congestion_control = bbr cubic reno Then use lsmod to check if bbr is running lsmod | grep bbr It might display like this: tcp_bbr 20480 3 Finish Copyright © carry0987 all right reserved，powered by GitbookLast Modified : 2024-04-08 11:07:13 "},"article/05.RPi3-Switch-Off-IPV6.html":{"url":"article/05.RPi3-Switch-Off-IPV6.html","title":"Switch Off IPV6","keywords":"","body":"RPi3 Switch Off IPV6 Step Add these lines to /etc/sysctl.conf : net.ipv6.conf.all.disable_ipv6 = 1 net.ipv6.conf.default.disable_ipv6 = 1 net.ipv6.conf.lo.disable_ipv6 = 1 net.ipv6.conf.eth0.disable_ipv6 = 1 net.ipv6.conf.[interface].disable_ipv6 = 1 Use sudo sysctl -p to apply changes Reboot Copyright © carry0987 all right reserved，powered by GitbookLast Modified : 2024-04-08 11:07:13 "},"article/06.RPi3-Auto-Reconnect-WiFi.html":{"url":"article/06.RPi3-Auto-Reconnect-WiFi.html","title":"Auto Reconnect WiFi","keywords":"","body":"RPi3 Auto reconnect to wifi when lost connect Create script file Use touch /home/pi/wifi-reconnect.sh to create shell script file, with following content: #!/bin/bash SSID=$(/sbin/iwgetid --raw) if [ -z \"$SSID\" ] then echo \"`date -Is` WiFi interface is down, trying to reconnect\" >> /home/pi/wifi-log.txt sudo ifconfig wlan0 down sleep 30 sudo ifconfig wlan0 up fi echo \"WiFi check finished\" Or you can also use sudo wget https://raw.github.com/carry0987/Raspberry-Pi-Repo/master/Auto-WiFi-Reconnect/wifi-reconnect.sh to download the script Make new file executable sudo chmod +x /home/pi/wifi-reconnect.sh Install cron sudo apt-get install cron Edit crontab Use sudo vim /etc/crontab to edit crontab By putting following content at end of file: * * * * * root /home/pi/wifi-reconnect.sh Test it by disconnecting from WiFi: sudo ifconfig wlan0 down Script should reestablish connection within 1 minute. Check log file After the RPi reestablish connection, reconnect RPi and check log file: cat /home/pi/wifi-log.txt Copyright © carry0987 all right reserved，powered by GitbookLast Modified : 2024-04-08 11:07:13 "},"article/07.Internet-Speedtest.html":{"url":"article/07.Internet-Speedtest.html","title":"Internet Speedtest","keywords":"","body":"Internet Speedtest Step Download speedtest python script from Sivel sudo wget https://raw.github.com/sivel/speedtest-cli/master/speedtest.py Use sudo chmod a+rx speedtest.py to make speedtest.py can be executed Use sudo mkdir /usr/local/bin/speedtest to create folder Use sudo mv speedtest.py /usr/local/bin/speedtest to move speedtest.py to speedtest folder Use sudo chown root:root /usr/local/bin/speedtest to change owner Use cd /usr/local/bin/speedtest to go to speedtest folder Use sudo python speedtest.py to run speedtest script Note If you want to get the picture of test result, you can add --share on the end of the script sudo python speedtest.py --share Copyright © carry0987 all right reserved，powered by GitbookLast Modified : 2024-04-08 11:07:13 "},"article/08.RPi3-Auto-Send-New-IP_Shell.html":{"url":"article/08.RPi3-Auto-Send-New-IP_Shell.html","title":"Auto-Send-New-IP (Shell)","keywords":"","body":"RPi3 Auto Email New Public IP If Changed (Shell) Step Use wget to download IP-Reporting script sudo wget https://raw.github.com/carry0987/Raspberry-Pi-Repo/master/Auto-Report-IP/report-ip.sh Give the script executing permission sudo chmod +x report-ip.sh Enter your gmail address and receiver email address to the script sudo vim report-ip.sh Enter your gmail password to ssmtp.conf sudo vim /etc/ssmtp/ssmtp.conf Note : If your gmail have set Two-Step Verification, you should follow the step to get token: Log-in into Gmail with your account Navigate to https://security.google.com/settings/security/apppasswords In 'select app' choose 'custom', give it an arbitrary name and press generate It will give you 16 chars token Use the token as password with your Gmail account and two factor authentication will not be required. Move report-ip.sh to usr folder sudo mv report-ip.sh /usr/local/bin Create a systemd service to make the script will auto be run on boot It can auto check the network connection make sure the network is online so that it can send the email sudo wget https://raw.github.com/carry0987/Raspberry-Pi-Repo/master/Auto-Report-IP/report-ip-sh.service Move report-ip-sh.service to systemd folder sudo mv report-ip-sh.service /etc/systemd/system Enable the service sudo systemctl enable report-ip-sh Start the service sudo systemctl start report-ip-sh Use systemctl to check the status of the service sudo systemctl status report-ip-sh Now edit crontab to make the script run every minutes sudo vim /etc/crontab Add the following script on the bottom, then save and exit * * * * * root /bin/bash /usr/local/bin/report-ip.sh >/dev/null 2>&1 Restart cron service sudo service cron restart Finish Copyright © carry0987 all right reserved，powered by GitbookLast Modified : 2024-04-08 11:07:13 "},"article/09.RPi3-Auto-Send-New-IP_Python3.html":{"url":"article/09.RPi3-Auto-Send-New-IP_Python3.html","title":"Auto-Send-New-IP (Python3)","keywords":"","body":"RPi3 Auto Email New Public IP If Changed (Python3) Step Use wget to download IP-Reporting script sudo wget https://raw.github.com/carry0987/Raspberry-Pi-Repo/master/Auto-Report-IP/report-ip.py Give the script executing permission sudo chmod +x report-ip.py Enter your gmail address, password and receiver email address to the script sudo vim report-ip.py Note : If your gmail have set Two-Step Verification, you should follow the step to get token: Log-in into Gmail with your account Navigate to https://security.google.com/settings/security/apppasswords In 'select app' choose 'custom', give it an arbitrary name and press generate It will give you 16 chars token Use the token as password with your Gmail account and two factor authentication will not be required. Move report-ip.py to usr folder sudo mv report-ip.py /usr/local/bin Create a systemd service to make the script will auto be run on boot It can auto check the network connection make sure the network is online so that it can send the email sudo vim /etc/systemd/system/report-ip.service Put the following script into the report-ip.service,then save and exit [Unit] Description=IP Reporter After=network-online.target Wants=network-online.target [Service] ExecStart=/usr/bin/python3 /usr/local/bin/report-ip.py [Install] WantedBy=multi-user.target Enable the service sudo systemctl enable report-ip Start the service sudo systemctl start report-ip Use systemctl to check the status of the service sudo systemctl status report-ip Now edit crontab to make the script run every minutes sudo vim /etc/crontab Add the following script on the bottom, then save and exit * * * * * root /usr/bin/python3 /usr/local/bin/report-ip.py Restart cron service sudo service cron restart Finish Copyright © carry0987 all right reserved，powered by GitbookLast Modified : 2024-04-08 11:07:13 "},"article/10.Add-IMG-To-Berryboot.html":{"url":"article/10.Add-IMG-To-Berryboot.html","title":"Add IMG To Berryboot","keywords":"","body":"Add IMG To Berryboot Adding your own custom operating systems to the menu Most Raspberry Pi operating system images are disk images containing two partitions. A FAT partition with the boot loader and kernel files, and a second Ext4 partition with everything else. We are interested in the second partition. With a regular Linux desktop computer that has kpartx and mksquashfs installed, you can convert the second partition to SquashFS like this: $ sudo kpartx -av image_you_want_to_convert.img add map loop0p1 (252:5): 0 117187 linear /dev/loop0 1 add map loop0p2 (252:6): 0 3493888 linear /dev/loop0 118784 $ sudo mount /dev/mapper/loop0p2 /mnt $ sudo sed -i 's/^\\/dev\\/mmcblk/#\\0/g' /mnt/etc/fstab $ sudo sed -i 's/^PARTUUID/#\\0/g' /mnt/etc/fstab $ sudo rm -f /mnt/etc/console-setup/cached_UTF-8_del.kmap.gz $ sudo rm -f /mnt/etc/systemd/system/multi-user.target.wants/apply_noobs_os_config.service $ sudo rm -f /mnt/etc/systemd/system/multi-user.target.wants/raspberrypi-net-mods.service $ sudo rm -f /mnt/etc/rc3.d/S01resize2fs_once $ sudo mksquashfs /mnt converted_image_for_berryboot.img -comp lzo -e lib/modules $ sudo umount /mnt $ sudo kpartx -d image_you_want_to_convert.img Notes If kpartx reports it created a mapping different than loop0p2 (e.g. loop4p2) mount that instead. This can happen if loop0 is already in use by something else on the system. We are excluding /lib/modules from the image, because the kernel modules shipped with Berryboot are used instead, and shared with all distributions. Some older versions of mksquashfs do not support the “-comp lzo” option. You can leave it out to let it use gzip compression instead. Advantage of LZO is that it is faster to uncompress, which is a big plus on slow ARM devices, and therefore preferred. This does come at a cost of reduced compression ratio (LZO images are larger than gzip ones). Import the img file to berryboot Put your SquashFS formatted image on a USB stick, go to the “Operating system installer”, hold down your mouse button over “Add OS” and select “Install from USB stick” If your image prefers to have a certain memory split use the extension .img128 .img192, .img224 or .img240 instead of .img. Tweaks If the image you are converting is based on Debian/Raspbian delete the etc/console-setup/cached_UTF-8_del.kmap.gz file before converting the image to force regeneration of the cached keyboard mapping on first boot. This is to make sure it uses the keyboard layout set in Berryboot instead of default British. Copyright © carry0987 all right reserved，powered by GitbookLast Modified : 2024-04-08 11:07:13 "},"article/11.RPi3-Change-Berryboot-Default-System-By-SSH.html":{"url":"article/11.RPi3-Change-Berryboot-Default-System-By-SSH.html","title":"Change Berryboot Default System By SSH","keywords":"","body":"RPi3 Change Berryboot Default System By SSH Step Use sudo mount /dev/mmcblk0p2 /mnt to mount raw storage Use ls /mnt/images to check what the full file name of the operating you would like to run Use sudo su to change user into root Write out the desired image file's name to \"runonce\": echo [filename_of_operating_system].img[memsplit amount] > /mnt/data/runonce For example: echo Raspbian.img128 > /mnt/data/runonce Reboot Note That this will only change the booted OS for the next reboot. You could probably change the default by changing the 4th step to the following: echo -n [filename_of_operating_system].img[memsplit amount] > /mnt/data/default Copyright © carry0987 all right reserved，powered by GitbookLast Modified : 2024-04-08 11:07:13 "},"article/12.Crontab–Quick-Reference.html":{"url":"article/12.Crontab–Quick-Reference.html","title":"Quick Reference","keywords":"","body":"Crontab - Quick Reference Setting up cron jobs in Unix, Solaris & Linux cron is a Unix, solaris, Linux utility that allows tasks to be automatically run in the background at regular intervals by the cron daemon. cron meaning – There is no definitive explanation but most accepted answers is reportedly from Ken Thompson ( author of unix cron ), name cron comes from chron ,the Greek prefix for ‘time.’. What is cron ? – Cron is a daemon which runs at the times of system boot from /etc/init.d scripts. If needed it can be stopped/started/restart using init script or with command service crond start in Linux systems. This document covers following aspects of Unix, Linux cron jobs to help you understand and implement cronjobs successfully What is a cron job or cron schedule? 1) Crontab Restrictions 2) Crontab Commands 3) Crontab file – syntax 4) Crontab Example 5) Crontab Environment 6) Disable Email 7) Generate log file for crontab activity 8) Crontab file location 1. What is crontab? Crontab (CRON TABle) is a file which contains the schedule of cron entries to be run and at specified times. File location varies by operating systems, See Crontab file location at the end of this document. 2.What is a cron job or cron schedule? Cron job or cron schedule is a specific set of execution instructions specifing day, time and command to execute. crontab can have multiple execution statments. 3. Crontab Restrictions You can execute crontab if your name appears in the file /usr/lib/cron/cron.allow. If that file does not exist, you can use crontab if your name does not appear in the file /usr/lib/cron/cron.deny. If only cron.deny exists and is empty, all users can use crontab. If neither file exists, only the root user can use crontab. The allow/deny files consist of one user name per line. 4. Crontab Commands export EDITOR=vi ;to specify a editor to open crontab file. crontab -e Edit crontab file, or create one if it doesn’t already exist. crontab -l crontab list of cronjobs , display crontab file contents. crontab -r Remove your crontab file. crontab -v Display the last time you edited your crontab file. (This option is only available on a few systems.) 5. Crontab file Crontab syntax : A crontab file has five fields for specifying day , date and time followed by the command to be run at that interval. crontab in the value field above means all legal values as in braces for that column. The value column can have a * or a list of elements separated by commas. An element is either a number in the ranges shown above or two numbers in the range separated by a hyphen (meaning an inclusive range). Notes A.) Repeat pattern like /2 for every 2 minutes or /10 for every 10 minutes is not supported by all operating systems. If you try to use it and crontab complains it is probably not supported. B.) The specification of days can be made in two fields: month day and weekday. If both are specified in an entry, they are cumulative meaning both of the entries will get executed . 6. Crontab Examples A line in crontab file like below removes the tmp files from /home/someuser/tmp each day at 6:30 PM. 30 18 * * * rm /home/someuser/tmp/* Changing the parameter values as below will cause this command to run at different time schedule below : min hour day/month month day/week Execution time 30 0 1 1,6,12 * — 00:30 Hrs on 1st of Jan, June & Dec. 0 20 * 10 1-5 – 8.00 PM every weekday (Mon-Fri) only in Oct. 0 0 1,10,15 * * — midnight on 1st ,10th & 15th of month 5,10 0 10 * 1 — At 12.05,12.10 every Monday & on 10th of every month Note : If you inadvertently enter the crontab command with no argument(s), do not attempt to get out with Control-d. This removes all entries in your crontab file. Instead, exit with Control-c. If you want to set crontab in specific time, for instance, running at midnight, 0 0 is the correct specification for midnight (no leading zeros, so in this case no double zero). From man crontab(5): field allowed values ----- -------------- minute 0-59 hour 0-23 day of month 1-31 month 1-12 (or names, see below) day of week 0-7 (0 or 7 is Sun, or use names) 7. Crontab Environment cron invokes the command from the user’s HOME directory with the shell, (/usr/bin/sh). cron supplies a default environment for every shell, defining: HOME=user’s-home-directory LOGNAME=user’s-login-id PATH=/usr/bin:/usr/sbin:. SHELL=/usr/bin/sh Users who desire to have their .profile executed must explicitly do so in the crontab entry or in a script called by the entry. 8. Disable Email By default cron jobs sends a email to the user account executing the cronjob. If this is not needed put the following command At the end of the cron job line . >/dev/null 2>&1 9. Generate log file To collect the cron execution execution log in a file : 30 18 * * * rm /home/someuser/tmp/* > /home/someuser/cronlogs/clean_tmp_dir.log 10. Crontab file location User crontab files are stored by the login names in different locations in different Unix and Linux flavors. These files are useful for backing up, viewing and restoring but should be edited only with crontab command by the users. Mac OS X \">BSD Unix ```/var/cron/tabs/``` Solaris, HP-UX, Debian, Ubuntu ```/var/spool/cron/crontabs/``` AIX, Red Hat Linux, CentOS, Ferdora ```/var/spool/cron/ Copyright © carry0987 all right reserved，powered by GitbookLast Modified : 2024-04-08 11:07:13 "},"article/13.Disable-Cron-Pam-Unix-Session.html":{"url":"article/13.Disable-Cron-Pam-Unix-Session.html","title":"Disable Cron Pam_Unix Session","keywords":"","body":"Disable Cron Pam_Unix Session Step Use sudo vim /etc/pam.d/common-session-noninteractive to edit the settings Find this line session required pam_unix.so Then add the following script on top of this line session [success=1 default=ignore] pam_succeed_if.so service in cron quiet use_uid Restart cron service sudo service cron restart Finish Copyright © carry0987 all right reserved，powered by GitbookLast Modified : 2024-04-08 11:07:13 "},"article/14.Auto-Login-PTT.html":{"url":"article/14.Auto-Login-PTT.html","title":"Auto Login PTT","keywords":"","body":"Auto login PTT with Expect Required Tools sudo apt-get install expect Step Get ptt.sh sudo wget https://raw.github.com/carry0987/Raspberry-Pi-Repo/master/Expect/ptt.sh Set username & password vim ptt.sh Give the script executing permission sudo chmod +x ptt.sh Move ptt.sh to usr folder sudo mv ptt.sh /usr/local/bin Now edit crontab to make the script run every minutes sudo vim /etc/crontab Add the following script on the bottom, then save and exit * 6 * * * root /usr/bin/expect /usr/local/bin/ptt.sh >/dev/null 2>&1 Restart cron service sudo service cron restart Finish Copyright © carry0987 all right reserved，powered by GitbookLast Modified : 2024-04-08 11:07:13 "},"article/15.Set-LC.html":{"url":"article/15.Set-LC.html","title":"Set locale","keywords":"","body":"RPi3 Set LC Required Tools You can use Nano or Vim, here I use nano to edit locale Step Use sudo nano /etc/default/locale to edit locale file Put following content into locale LANG=en_US.UTF-8 LANGUAGE=en_US.UTF-8 LC_ALL=en_US.UTF-8 LC_TYPE=en_US.UTF-8 Save and exit Press Ctrl+O and then Ctrl+X Copyright © carry0987 all right reserved，powered by GitbookLast Modified : 2024-04-08 11:07:13 "},"article/Extend-Swap.html":{"url":"article/Extend-Swap.html","title":"Extend Swap","keywords":"","body":"Enabling & Increasing Raspberry Pi Swap Note: Due to RAM limitations on the Raspberry Pi 3 and earlier, we now recommend ALL users use Neblio with a Raspberry Pi 4. Any Raspberry Pi 4 model should work, the models with more RAM are more future-proof for running Neblio. Users of Neblio who stake on Raspberry Pis earlier than the Raspberry Pi 3 (such as the Original Raspberry Pi, Raspberry Pi Zero, and potentially the Raspberry Pi 2) may benefit from a significant increase in performance by enabling and/or increasing the size of the Raspberry Pi's swap file. To enable the Raspberry Pi swap file and set it to a size of 1 GB (1024 MB), run the following commands on the Raspberry Pi in a terminal window: 1. Temporarily Stop Swap sudo dphys-swapfile swapoff 2. Modify the size of the swap As root, edit the file /etc/dphys-swapfile and modify the variable CONF_SWAPSIZE to 1024: CONF_SWAPSIZE=1024 Using a command such as: sudo nano /etc/dphys-swapfile 3. Initialize Swap File sudo dphys-swapfile setup 4. Start Swap sudo dphys-swapfile swapon Note Using a swap file could potentially result in an increase in writes & reads to your Raspberry Pi's SD card, possibly lowering the lifespan of the card. However in most cases Raspbian ships with a default swap file with a size of 100 MB and in this case we are simply increasing that to 1024 MB. Copyright © carry0987 all right reserved，powered by GitbookLast Modified : 2024-04-08 11:07:13 "},"article/Run-HatH-On-Portable-External-Hard-Drive.html":{"url":"article/Run-HatH-On-Portable-External-Hard-Drive.html","title":"Run HatH On Portable External Hard Drive","keywords":"","body":"Run HentaiAtHome On Portable External Hard Drive Install Required Tools sudo apt-get install screen sudo apt-get install vim sudo apt-get install openjdk-9-jdk sudo apt-get install openjdk-9-jre Auto Mount External Hard Drive Use df -h command to check the disk and free space on the system Use lsblk command to show the hard disk partition status and partition Use sudo fdisk -l to view details of the hard drive and volume The /dev/sda is the external dard drive Use sudo fdisk /dev/sda to edit the external hard drive, first d and then w to delete the partition table and disk on the hard disk Once again, use sudo fdisk /dev/sda to build disk partitionFirst type nNext type pAnd type 1Then press enter twice, if it shows contains a ext4 signature message,just type Y to countine, finally type w to build partition on the hard disk Use sudo mkfs.ext4 /dev/sda1 to format the partition into Ext4 Use sudo mkdir /media/hd to create a folder, then the external hard drive will be mounted here Use sudo chmod 777 /media/hd to give it permission Use ls -lh /dev/disk/by-uuid can see the UUID of the hard disk and partition Use sudo blkid /dev/sda1 to list UUIDs of external hard drive partitions Remember the UUID of external hard drive, then use sudo vim /etc/fstab to edit fstab to let raspberry pi automatically mount the external hard drive after boot you will see this: then press i, the -- INSERT -- will display at buttom, it means now this file can be edit type UUID=YOURUUID /media/hd ext4 defaults 0 2 then press ESC, you will see that -- INSERT -- disappear now type :wq, then press enter Use sudo reboot to reboot the device, and then use df -h to check if the external hard drive has been mounted Now use sudo mkdir /media/hd/hath to create a folder, and use sudo chmod 777 /media/hd/hath to give it permission Set up the server You can use set-hath.sh to set up HentaiAtHome automatically bash -c \"$(curl https://raw.github.com/carry0987/Raspberry-Pi-Repo/master/HatH/set-hath.sh)\" Or just follow the tutorial below Use cd /media/hd/hath to go to hath folder, then use sudo wget https://repo.e-hentai.org/hath/HentaiAtHome_1.6.2.zip to download the H@H Use sudo unzip HentaiAtHome_1.6.2.zip to unzip H@H files Use screen to start terminal in background you will see this just press enter to start Use sudo java -jar HentaiAtHome.jar to start H@H Enter your Client ID and Client Key Running Now press Ctrl + A and then press D to detach H@H Finish Copyright © carry0987 all right reserved，powered by GitbookLast Modified : 2024-04-08 11:07:13 "}}